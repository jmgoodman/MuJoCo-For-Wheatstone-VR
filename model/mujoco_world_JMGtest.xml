<mujoco>
    <compiler coordinate="local" angle="radian"/>
    <option apirate="50" gravity="0 0 0">
        <flag clampctrl="disable" contact="enable" gravity="disable"/>
    </option>
    <include file="mujoco_arm_1.10_Bart.xml"/>
    <default>
        <!--default class="handle">
            <joint damping="0.2" armature="0.01" range="-3.14159265 3.14159265"/>
            <position ctrllimited="true" kp="10" ctrlrange="-3.14159265 3.14159265"/>
        </default-->
        <default class="button">
            <geom contype="0" conaffinity="0"/>
            <!--Low damping (friction) and high stiffness for a fast recovery of default position-->            
            <joint damping="0.1" stiffness="10" armature="0"/>
            <!--joint damping="0.5" stiffness="100" armature="0"/-->
        </default>
        <default class="handle">
            <geom contype="0" conaffinity="0"/>
        </default>
        <default class="handrest">
            <geom contype="0" conaffinity="0"/>
            <!--Low damping (friction) and high stiffness for a fast recovery of default position-->            
            <joint damping="2" stiffness="100" armature="0"/>
            <!--joint damping="0.5" stiffness="100" armature="0"/-->
        </default>
    </default>
    
    <default>
        <!--geom rgba="0.3 0.3 0 1"/-->
    </default>
    
    <visual>
        <scale jointwidth="0.05" jointlength="0.05" contactwidth="0.1" contactheight="0.04" forcewidth="0.01"/>
		<global ipd="0.03"/> <!--change me to adjust interpupillary distance!/-->
        <rgba contactpoint="1 1 0 1"/>
        <map znear="0.05"/>
    	<headlight ambient="0 0 0" diffuse="0.8 0.8 0.8" specular="0 0 0"/>
    </visual>
    
    <asset>
        <texture type="skybox" builtin="gradient" rgb1="0 0 0" rgb2="0 0 0" 
                 width="256" height="256"/>
        <mesh name="HandleM" scale="0.001 0.001 0.001" file="Handle_1.2.stl"/>
        <mesh name="HandleNoDiskM" scale="0.001 0.001 0.001" file="HandleNoDisk_1.3.stl"/>
        <mesh name="BoxHandleDiskM" scale="0.001 0.001 0.001" file="BoxHandleDisk_1.0.stl"/>
        <material name="pm" specular="0" shininess="0" rgba="0 0 0 1"/>
    </asset>
    
    <worldbody>
        
        <!--light directional="false" cutoff="45" exponent="20" attenuation="0.3 0 0" pos="-0.11 -0.17 0.28" dir="1 1 -1" diffuse="1 1 1" ambient="0 0 0" specular="0 0 0"/-->
        <!--light directional="false" cutoff="35" exponent="10" diffuse=".7 .7 .7" pos="0.4 -0.2 1.5" dir="-0.4 0.2 -1.5" specular=".3 .3 .3"/-->
        
        <!--geom type="plane" pos="0 0 0.05" size=".15 .25 .05" group="2" material="pm"/-->
		
		
        
        <body name="or" pos="0 0 0">
            <geom type="box" size="0.02 0.001 0.001" pos="0.02 0 0" contype="0" conaffinity="0" group="3" rgba="1 0 0 1"/>
            <geom type="box" size="0.001 0.02 0.001" pos="0 0.02 0" contype="0" conaffinity="0" group="3" rgba="0 0.5 0 1"/>
            <geom type="box" size="0.001 0.001 0.02" pos="0 0 0.02" contype="0" conaffinity="0" group="3" rgba="0 0 0.5 1"/>
        </body>
        
        <body pos="-0.11 -0.17 0.28" euler="-0.6 0.85 0" mocap="true">
            <!-- The position value on pos X brings the light back and forth preserving rotation-->
            <light directional="false" cutoff="45" exponent="20" attenuation="0.3 0 0" pos="0 0 0" dir="1 0 0" diffuse="0.82 0.91 1.00" ambient="0 0 0" specular="0 0 0" castshadow="false"/>
        </body>
        
        <body pos="-0.200 -0.150 0.240" euler="0 0 0" mocap="true">
            <!--Euler order relative to camera pitch yaw roll-->
            <camera euler="0 -1.5708 -1.5708"/>
        </body>
        
        <!--Help object-->
        <body pos="0 0 0" euler="0 0 0" mocap="true">            
            <geom type="sphere" size="5e-4" rgba="0.5 0.0 0.5 1.0" group="3" contype="0" conaffinity="0"/>
        </body>
        
        <!--Handrest--->
        <body pos="-0.12 -0.135 0.07" mocap="true">
            <body childclass="handrest">
                <!--joint name="sh" type="slide" axis="0 0 -1"/-->
                <geom type="cylinder" size="0.015 0.01" group="2" rgba="1 1 1 1"/>
                <site name="sh1" type="box" size="0.0025 0.0025 0.0003" pos="0.004 0.004 0.01" group="3" rgba="0 1 1 0.9"/>
                <site name="sh2" type="box" size="0.0025 0.0025 0.0003" pos="-0.004 0.004 0.01" group="3" rgba="0 1 1 0.9"/>
                <site name="sh3" type="box" size="0.0025 0.0025 0.0003" pos="-0.004 -0.004 0.01" group="3" rgba="0 1 1 0.9"/>
                <site name="sh4" type="box" size="0.0025 0.0025 0.0003" pos="0.004 -0.004 0.01" group="3" rgba="0 1 1 0.9"/>
            </body>
        </body>
        
        <!--Handle--->
        <body quat="1 1 0 0" pos="-0.0460 0 0.151" mocap="true">            
            <geom type="mesh" mesh="HandleNoDiskM" group="3" contype="0" conaffinity="0" rgba="0.4 0.4 0.4 0.1"/>
            <geom type="mesh" mesh="HandleNoDiskM" group="2" contype="0" conaffinity="0" rgba="0.4 0.4 0.4 1.0"/>
            <!--
            Order:
            Up front
            Down front
            Up back
            Down back
            -->
            <geom type="box" class="handle"size="0.005 0.0155 0.004" pos="-0.048 0.024 0.0" rgba="0.2 0.2 0.2 0.9"/>
            <geom type="box" class="handle" size="0.005 0.0155 0.004" pos="-0.048 -0.024 0.0" rgba="0.2 0.2 0.2 0.9"/>
            <geom type="box" class="handle" size="0.015 0.004 0.004" pos="-0.0275 0.0325 0.0" rgba="0.2 0.2 0.2 0.9"/>            
            <geom type="box" class="handle" size="0.015 0.004 0.004" pos="-0.0275 -0.0325 0.0" rgba="0.2 0.2 0.2 0.9"/>
            <!--geom type="box" class="handle" size="0.005 0.0155 0.005" pos="-0.048 0.024 0.0" group="4" rgba="0.2 0.2 0.2 0.9"/>
            <geom type="box" class="handle" size="0.005 0.0155 0.005" pos="-0.048 -0.024 0.0" group="4" rgba="0.2 0.2 0.2 0.9"/>
            <geom type="box" class="handle" size="0.015 0.005 0.005" pos="-0.0275 0.0345 0.0" group="4" rgba="0.2 0.2 0.2 0.9"/>
            <geom type="box" class="handle" size="0.015 0.005 0.005" pos="-0.0275 -0.0345 0.0" group="4" rgba="0.2 0.2 0.2 0.9"/-->
            
            <!--
            Handle local coords, looking from front:
            
                    ^
                    | +Y
                   | |
              -Z <-| |-> +Z
                   | |
               X into the screen
            
            -->
            <body childclass="button" pos="-0.051 0.0 0.005">
                <joint name="sr" type="slide" axis="0 0 -1"/>
                <geom type="box" size="0.0025 0.01 0.0016" group="3" contype="0" conaffinity="2" rgba="1 0 1 0.9"/>
                <geom type="box" size="0.007 0.01 0.0015" pos="0.003 0 -0.0015" group="2" rgba="0.2 0.2 0.2 1"/>
            </body>
            
            <body childclass="button" pos="-0.051 0.0 -0.005" euler="0 0.5 0">
                <joint name="sl" type="slide" axis="0 0 1"/>
                <geom type="box" size="0.0025 0.01 0.001" pos="0 0 0.001" group="3" contype="0" conaffinity="4" rgba="0 1 0 0.9"/>
                <geom type="box" size="0.007 0.01 0.0015" pos="0.002 0 0.0032" group="2" euler="0 -0.5 0" rgba="0.2 0.2 0.2 1" />
            </body>
            
            <body childclass="button" pos="-0.038 0.0 0.0" euler="0 0 0">
                <joint name="sb" type="slide" axis="-1 0 0"/>
                <geom type="box" size="0.0004 0.02 0.004" group="3" contype="0" conaffinity="8" rgba="0 1 1 0.9"/>
            </body>
            
            <body pos="-0.036 -0.023 -0.01" euler="-1.5708 0 0">               
                <site name="st" type="box" size="0.0025 0.0025 0.0005" group="3" rgba="0 1 1 0.9"/>
            </body>
            
            <!--Index finger power check help object-->
            <body name="sf2t" pos="-0.047 +0.019 -0.013">
                <geom type="sphere" size="0.01" rgba="1 0.6 0.8 0.3" group="3" contype="0" conaffinity="0"/>
            </body>
            
            <!--Little finger power check help object-->
            <body name="sf5t" pos="-0.04 -0.016 -0.008">
                <geom type="sphere" size="0.01" rgba="1 0.6 0.8 0.3" group="3" contype="0" conaffinity="0"/>
            </body>
            
            <!--Little finger prec check help object-->
            <body name="sf5u" pos="-0.064 -0.006 0.03">
                <geom type="sphere" size="0.01" rgba="1 0.6 0.8 0.3" group="3" contype="0" conaffinity="0"/>
            </body>
        </body>
        
        <body quat="1 1 0 0" pos="0 0 0" mocap="true">
            <body>
                <geom name="BoxHandleDisk" type="mesh" contype="0" conaffinity="0" mesh="BoxHandleDiskM" rgba="0.5 0.5 0.5 0"/>
            </body>
        </body>
    </worldbody>
    
    <actuator>
    </actuator>
    
    <sensor>        
        <jointpos joint="sr"/>
        <jointpos joint="sl"/>
        <jointpos joint="sb"/>
        <!--jointpos joint="sh"/-->
        <rangefinder site="st"/>
        <framepos objname="sf2t" objtype="body"/>
        <framepos objname="sf5t" objtype="body"/>
        <framepos objname="sf5u" objtype="body"/>
        <rangefinder site="sh1"/>
        <rangefinder site="sh2"/>
        <rangefinder site="sh3"/>
        <rangefinder site="sh4"/>
    </sensor>
</mujoco>
